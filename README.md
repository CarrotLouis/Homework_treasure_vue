# 🏴‍☠️ 寻宝冒险游戏 Plus - Vue 3 版本

一个基于 Vue 3 的文字冒险 RPG 游戏，采用 CDN 方式引入 Vue 生态系统，无需构建工具即可运行。

## ✨ 核心特性

### 🎮 游戏玩法
- **多场景探索**：全景视图、图书馆、河边、商店、古庙等多个可探索场景
- **剧情任务**：寻找线索 → 解密古文 → 获取小船 → 探索古庙 → 击败守卫 → 开启宝箱
- **战斗系统**：回合制战斗，包含攻击、使用药水、逃跑等操作
- **升级系统**：击败敌人获得经验，升级提升属性
- **商店系统**：购买武器、防具和消耗品提升战斗力
- **随机事件**：每个场景都有限定次数的随机事件（发现宝箱、遇到商人、触发陷阱等）

### 👤 用户管理
- **多用户支持**：创建多个玩家账号，每个玩家独立存档
- **用户统计**：追踪每个玩家的完成次数、最高分、总金币
- **存档隔离**：每个用户的游戏进度独立保存，互不干扰
- **快速切换**：一键切换到不同玩家并加载其存档

### 🏆 排行榜系统
- **最近游戏**：显示最近 10 次游戏记录
- **最高分榜**：按分数排序的前 20 名
- **金币榜**：按金币数量排序的前 20 名
- **前三名特殊标识**：🥇🥈🥉 勋章显示

### 🎵 音效系统
- **背景音乐**：每个场景都有独特的背景音乐
- **战斗音乐**：进入战斗时切换为战斗 BGM
- **音量控制**：实时调节音量（0-100%）
- **一键开关**：快速启用/禁用背景音乐
- **自动恢复**：刷新页面后恢复上次的音乐设置

### 💾 数据持久化
- **LocalStorage 存储**：所有数据保存在浏览器本地
- **自动保存**：每次操作后自动保存游戏状态
- **用户隔离**：不同用户的存档独立保存（`gameState_${userId}`）
- **历史记录**：全局游戏历史记录，用于排行榜显示

## 🚀 快速开始

### 在线访问
```
直接用浏览器打开 index.html 文件即可游戏
```

### 本地运行
1. 下载或克隆项目到本地
2. 用浏览器打开 `index.html` 文件
3. 开始游戏！

**注意**：项目使用 CDN 引入依赖，需要联网才能正常运行。

## 📁 项目结构

```
Homework_treasure_vue/
├── index.html                 # 应用入口，CDN 加载器
├── vue-app/
│   ├── App.js                # 根组件
│   ├── main.js               # 入口标记文件
│   ├── stores/
│   │   └── gameStore.js      # Pinia 状态管理（游戏核心逻辑）
│   ├── views/
│   │   ├── GameView.js       # 游戏主界面（包含多个子组件）
│   │   ├── UserManagement.js # 用户管理页面
│   │   └── Leaderboard.js    # 排行榜页面
│   └── styles/
│       └── main.css          # 全局样式
├── music/                    # 背景音乐文件夹（需自行添加）
│   ├── index.mp3            # 全景音乐
│   ├── library.mp3          # 图书馆音乐
│   ├── river.mp3            # 河边音乐
│   ├── temple.mp3           # 古庙音乐
│   ├── store.mp3            # 商店音乐
│   └── battle.mp3           # 战斗音乐
└── README.md                # 项目文档
```

## 🛠️ 技术栈

### 核心框架
- **Vue 3.3.4**（CDN）：渐进式 JavaScript 框架
- **Vue Router 4.2.4**（CDN）：官方路由管理
- **Pinia 2.1.7**（CDN）：轻量级状态管理

### 架构特点
- **组件化设计**：7+ 个 Vue 组件
  - App（根组件）
  - GameView（游戏主视图）
  - LocationScene（场景组件）
  - StoreScene（商店组件）
  - BattleScene（战斗组件）
  - StatusPanel（状态面板）
  - InventoryPanel（背包组件）
  - GameLog（日志组件）
  - UserManagement（用户管理）
  - UserList（用户列表子组件）
  - Leaderboard（排行榜）

- **IIFE 模块化**：使用立即执行函数避免全局污染
- **无构建工具**：纯 CDN 引入，无需 npm/webpack
- **HashRouter**：使用 Hash 路由，适合静态部署

## 🎯 游戏流程

### 主线任务
1. **图书馆探索**
   - 寻找古老线索
   - 解密古文（需要先找到线索）

2. **河边探索**
   - 寻找小船（有概率失败）
   - 渡河前往古庙（需要小船和已解密古文）

3. **古庙探险**
   - 搜索神庙（可能触发陷阱战斗）
   - 找到神秘宝箱
   - 击败神庙守卫
   - 打开宝箱获得宝藏

### 支线系统
- **商店购物**：购买装备提升战斗力
- **随机事件**：每个场景限定 5 次随机事件
- **战斗升级**：通过战斗获得经验和金币

## 💡 游戏技巧

1. **先购买装备**：在挑战神庙前建议购买武器和防具
2. **储备药水**：至少携带 2-3 瓶治疗药水
3. **触发随机事件**：有机会获得额外金币和物品
4. **战斗策略**：合理使用攻击和药水，必要时可以逃跑
5. **升级加点**：升级会恢复满血并提升所有属性

## 📊 数据存储说明

### LocalStorage 键值
- `treasureUsers`：所有用户列表
- `currentUser`：当前登录用户
- `gameState_${userId}`：用户专属存档
- `treasureHistory`：全局游戏历史
- `bgm_enabled`：背景音乐开关状态
- `bgm_volume`：背景音乐音量（0-1）

### 存档内容
```javascript
{
  currentLocation: '当前场景',
  inventory: ['背包物品'],
  logs: ['游戏日志'],
  clueFound: false,        // 是否找到线索
  decoded: false,          // 是否解密古文
  hasBoat: false,          // 是否有小船
  foundBox: false,         // 是否找到宝箱
  templeGuardDefeated: false, // 是否击败守卫
  playerStats: { /* 玩家属性 */ },
  shopItems: [ /* 商店物品状态 */ ],
  randomEventCounts: { /* 随机事件计数 */ }
}
```

## 🎨 界面设计

- **深色主题**：暗色背景配金色高亮
- **渐变按钮**：视觉吸引力强
- **响应式布局**：适配不同屏幕尺寸
- **动画效果**：按钮悬停、场景切换等
- **状态指示**：清晰显示生命、攻击、防御等属性

## 🐛 已知问题

1. **音乐自动播放**：部分浏览器可能阻止自动播放，需用户交互后才能播放
2. **音乐文件**：项目不包含音乐文件，需自行添加到 `music/` 文件夹
3. **网络依赖**：CDN 加载失败时游戏无法运行

## 🔧 开发说明

### 添加新场景
1. 在 `gameStore.js` 的 `goToLocation` 中添加场景名称映射
2. 在 `GameView.js` 的 `LocationScene` 组件中添加场景数据
3. 在 `main.css` 中添加场景样式（可选）
4. 添加对应的背景音乐文件

### 添加新物品
在 `gameStore.js` 的 `shopItems` 数组中添加：
```javascript
{
  id: 'unique_id',
  name: '物品名称',
  type: 'weapon/armor/consumable',
  attack: 10,      // 武器专用
  defense: 5,      // 防具专用
  price: 100,
  bought: false
}
```

## 📝 更新日志

### v1.0.0 (当前版本)
- ✅ 完整的游戏流程
- ✅ 用户管理系统
- ✅ 排行榜系统
- ✅ 战斗系统与升级机制
- ✅ 商店系统
- ✅ 随机事件系统
- ✅ 背景音乐系统
- ✅ 数据持久化
- ✅ 响应式界面

## 🙏 致谢

- Vue.js 团队：提供优秀的前端框架
- 感谢朱涛老师的授课

## 版权相关
本作业未经授权使用了一些音乐，只用于展示作业给老师看，望版权方理解

使用的音乐如下：
- 《Guil-me N'o sinruits-水-》 ——魔法少女的魔女审判OST;
- 《世界は可愛く出来ている》 ——上海アリス幻樂団;
- 《ラクトガール　～ 少女密室》 ——上海アリス幻樂団; 
- 海愿 ——塞壬唱片-MSR; Eagle Wei; 
- 明日方舟「公测」采购中心 ——塞壬唱片-MSR;
- Operation Wild Scales (Instrumental) ——塞壬唱片-MSR; David Westbom; 

---

**祝你游戏愉快！🎮**